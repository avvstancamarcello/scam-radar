# GitHub Actions Workflow for IONOS SFTP Deploy
# Deploy automatico su www.scam-radar.com via SFTP
# âš ï¸ WORKFLOW UNIDIREZIONALE: Solo push locale â†’ GitHub â†’ IONOS
# GitHub NON puÃ² modificare il repository senza autorizzazione

name: ğŸš€ Deploy to IONOS (scam-radar.com)

on:
  push:
    branches:
      - main
  workflow_dispatch:  # Permette deploy manuale

# Blocca qualsiasi scrittura sul repository
permissions:
  contents: read  # Solo lettura, nessuna modifica possibile

jobs:
  deploy:
    name: ğŸ“¤ Upload to IONOS SFTP
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout repository (read-only)
        uses: actions/checkout@v4
        with:
          persist-credentials: false  # Non salva credenziali Git
          
      - name: ğŸ“¤ Deploy via SFTP
        uses: SamKirkland/FTP-Deploy-Action@v4.3.5
        with:
          server: ${{ secrets.IONOS_FTP_HOST }}
          username: ${{ secrets.IONOS_FTP_USER }}
          password: ${{ secrets.IONOS_FTP_PASSWORD }}
          protocol: ftps
          port: 21
          local-dir: ./
          server-dir: /
          
      - name: âœ… Deploy completato
        run: |
          echo "ğŸ‰ Deploy su www.scam-radar.com completato!"
          echo "ğŸ“… Data: $(date)"
          echo "âš ï¸ Workflow READ-ONLY: nessuna modifica al repository"
